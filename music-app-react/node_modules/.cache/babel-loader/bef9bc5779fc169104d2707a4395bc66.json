{"ast":null,"code":"'use strict';\n\nconst CID = require('cids');\n\nconst errCode = require('err-code');\n\nconst {\n  withTimeoutOption\n} = require('../../utils');\n\nconst uint8ArrayFromString = require('uint8arrays/from-string');\n\nfunction normalizeMultihash(multihash, enc) {\n  if (typeof multihash === 'string') {\n    if (enc === 'base58' || !enc) {\n      return multihash;\n    }\n\n    return uint8ArrayFromString(multihash, enc);\n  } else if (multihash instanceof Uint8Array) {\n    return multihash;\n  } else if (CID.isCID(multihash)) {\n    return multihash.bytes;\n  }\n\n  throw new Error('unsupported multihash');\n}\n\nmodule.exports = ({\n  ipld,\n  preload\n}) => {\n  return withTimeoutOption(async function get(multihash, options) {\n    // eslint-disable-line require-await\n    options = options || {};\n    let mh, cid;\n\n    try {\n      mh = normalizeMultihash(multihash, options.enc);\n    } catch (err) {\n      throw errCode(err, 'ERR_INVALID_MULTIHASH');\n    }\n\n    try {\n      cid = new CID(mh);\n    } catch (err) {\n      throw errCode(err, 'ERR_INVALID_CID');\n    }\n\n    if (options.cidVersion === 1) {\n      cid = cid.toV1();\n    }\n\n    if (options.preload !== false) {\n      preload(cid);\n    }\n\n    return ipld.get(cid, {\n      signal: options.signal\n    });\n  });\n};","map":{"version":3,"sources":["/home/user/orbit-playground/music-app/node_modules/ipfs/src/core/components/object/get.js"],"names":["CID","require","errCode","withTimeoutOption","uint8ArrayFromString","normalizeMultihash","multihash","enc","Uint8Array","isCID","bytes","Error","module","exports","ipld","preload","get","options","mh","cid","err","cidVersion","toV1","signal"],"mappings":"AAAA;;AAEA,MAAMA,GAAG,GAAGC,OAAO,CAAC,MAAD,CAAnB;;AACA,MAAMC,OAAO,GAAGD,OAAO,CAAC,UAAD,CAAvB;;AACA,MAAM;AAAEE,EAAAA;AAAF,IAAwBF,OAAO,CAAC,aAAD,CAArC;;AACA,MAAMG,oBAAoB,GAAGH,OAAO,CAAC,yBAAD,CAApC;;AAEA,SAASI,kBAAT,CAA6BC,SAA7B,EAAwCC,GAAxC,EAA6C;AAC3C,MAAI,OAAOD,SAAP,KAAqB,QAAzB,EAAmC;AACjC,QAAIC,GAAG,KAAK,QAAR,IAAoB,CAACA,GAAzB,EAA8B;AAC5B,aAAOD,SAAP;AACD;;AACD,WAAOF,oBAAoB,CAACE,SAAD,EAAYC,GAAZ,CAA3B;AACD,GALD,MAKO,IAAID,SAAS,YAAYE,UAAzB,EAAqC;AAC1C,WAAOF,SAAP;AACD,GAFM,MAEA,IAAIN,GAAG,CAACS,KAAJ,CAAUH,SAAV,CAAJ,EAA0B;AAC/B,WAAOA,SAAS,CAACI,KAAjB;AACD;;AACD,QAAM,IAAIC,KAAJ,CAAU,uBAAV,CAAN;AACD;;AAEDC,MAAM,CAACC,OAAP,GAAiB,CAAC;AAAEC,EAAAA,IAAF;AAAQC,EAAAA;AAAR,CAAD,KAAuB;AACtC,SAAOZ,iBAAiB,CAAC,eAAea,GAAf,CAAoBV,SAApB,EAA+BW,OAA/B,EAAwC;AAAE;AACjEA,IAAAA,OAAO,GAAGA,OAAO,IAAI,EAArB;AAEA,QAAIC,EAAJ,EAAQC,GAAR;;AAEA,QAAI;AACFD,MAAAA,EAAE,GAAGb,kBAAkB,CAACC,SAAD,EAAYW,OAAO,CAACV,GAApB,CAAvB;AACD,KAFD,CAEE,OAAOa,GAAP,EAAY;AACZ,YAAMlB,OAAO,CAACkB,GAAD,EAAM,uBAAN,CAAb;AACD;;AAED,QAAI;AACFD,MAAAA,GAAG,GAAG,IAAInB,GAAJ,CAAQkB,EAAR,CAAN;AACD,KAFD,CAEE,OAAOE,GAAP,EAAY;AACZ,YAAMlB,OAAO,CAACkB,GAAD,EAAM,iBAAN,CAAb;AACD;;AAED,QAAIH,OAAO,CAACI,UAAR,KAAuB,CAA3B,EAA8B;AAC5BF,MAAAA,GAAG,GAAGA,GAAG,CAACG,IAAJ,EAAN;AACD;;AAED,QAAIL,OAAO,CAACF,OAAR,KAAoB,KAAxB,EAA+B;AAC7BA,MAAAA,OAAO,CAACI,GAAD,CAAP;AACD;;AAED,WAAOL,IAAI,CAACE,GAAL,CAASG,GAAT,EAAc;AAAEI,MAAAA,MAAM,EAAEN,OAAO,CAACM;AAAlB,KAAd,CAAP;AACD,GA1BuB,CAAxB;AA2BD,CA5BD","sourcesContent":["'use strict'\n\nconst CID = require('cids')\nconst errCode = require('err-code')\nconst { withTimeoutOption } = require('../../utils')\nconst uint8ArrayFromString = require('uint8arrays/from-string')\n\nfunction normalizeMultihash (multihash, enc) {\n  if (typeof multihash === 'string') {\n    if (enc === 'base58' || !enc) {\n      return multihash\n    }\n    return uint8ArrayFromString(multihash, enc)\n  } else if (multihash instanceof Uint8Array) {\n    return multihash\n  } else if (CID.isCID(multihash)) {\n    return multihash.bytes\n  }\n  throw new Error('unsupported multihash')\n}\n\nmodule.exports = ({ ipld, preload }) => {\n  return withTimeoutOption(async function get (multihash, options) { // eslint-disable-line require-await\n    options = options || {}\n\n    let mh, cid\n\n    try {\n      mh = normalizeMultihash(multihash, options.enc)\n    } catch (err) {\n      throw errCode(err, 'ERR_INVALID_MULTIHASH')\n    }\n\n    try {\n      cid = new CID(mh)\n    } catch (err) {\n      throw errCode(err, 'ERR_INVALID_CID')\n    }\n\n    if (options.cidVersion === 1) {\n      cid = cid.toV1()\n    }\n\n    if (options.preload !== false) {\n      preload(cid)\n    }\n\n    return ipld.get(cid, { signal: options.signal })\n  })\n}\n"]},"metadata":{},"sourceType":"script"}